<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manejo Asincronico Callbacks</title>
</head>
<body>
    <h1>Manejo Asincronia Callback</h1>
    <script>
        function sumar (a, b, callback){
            let suma;
            setTimeout(()=>{
                try{
                    if(typeof a !== "number" || typeof b !== "number" || typeof callback !== "function"){
                        throw Error("Parametros invalidos para la suma")
                    } else {
                        suma = a+b;
                        console.log("La suma es: " + suma);
                        callback(suma);
                    }
                }catch(error) {
                    console.log(error.message);
                }
                /*
                    suma = a+b;
                    console.log("La suma es: " + suma);
                    callback(suma);
                */
            }, 2000);
        }

        function restar (a, b, callback){
            let resta;
            setTimeout(()=>{
                try{
                    if(typeof a !== "number" || typeof b !== "number" || typeof callback !== "function"){
                        throw Error("Parametros invalidos para la resta")
                    } else {
                        resta = a-b;
                        console.log("La resta es: " + resta);
                        callback(resta);
                    }
                }catch(error) {
                    console.log(error.message);
                }
                /*
                    resta = a-b;
                    console.log("La resta es: " + resta);
                    callback(resta);
                */
            }, 1000);
        }

        function multiplicar (a, b, callback){
            let producto;
            setTimeout(()=>{
                try{
                    if(typeof a !== "number" || typeof b !== "number" || typeof callback !== "function"){
                        throw Error("Parametros invalidos para la multiplicacion")
                    } else {
                        producto = a*b;
                        console.log("El producto es: " + producto);
                        callback(producto);
                    }
                }catch(error) {
                    console.log(error.message);
                }
                /*
                    producto = a*b;
                    console.log("El producto es: " + producto);
                    callback(producto);
                */
            }, 1000);
        }

        function cuadrado (a, callback){
            let cuadrado;
            setTimeout(()=>{
                try{
                    if(typeof a !== "number" || typeof callback !== "function"){
                        throw Error("Parametros invalidos para la cuadratica")
                    } else {
                        cuadrado = a*a;
                        console.log("La cuadratica es: " + cuadrado);
                        callback(cuadrado);
                    }
                }catch(error) {
                    console.log(error.message);
                }
                /*cuadrado = a*a;
                console.log("La cuadrado es: " + cuadrado);
                callback(cuadrado);*/
            }, 3000);
        }
        
        function informar (resultado){
            console.log("El resultado es: " + resultado);
        }

        //Sumar 8+5, al resultado calcular el cuadrado, al cuadrado multiplcarlo por diez, y al resultado restarle 40 e informar por consola el resultado final.
        //informar(restar(multiplicar(cuadrado(sumar(8, 5)),10),40));
        console.log("Incio");
        sumar(8,5, (suma) => {
            cuadrado(suma, (cuad) => {
                multiplicar(cuad, 10, (producto) => {
                    restar(producto, 40, (resta) => {
                        informar(resta); // -> Callback hell
                    })
                })
            })
        });
        console.log("Fin");
    </script>
</body>
</html>